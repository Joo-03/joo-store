<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting...</title>
  <script>
    (function() {
      const base = '/joo-store';
      const path = window.location.pathname;
      const search = window.location.search || '';
      const hash = window.location.hash || '';
      
      // If we're already at the root with a hash, let the SPA handle it
      if (path.endsWith('/') || path.endsWith('/index.html')) {
        // If we have a hash that doesn't start with #/, add it
        if (hash && !hash.startsWith('#/')) {
          window.location.replace(`${base}/index.html#/${hash.substring(1)}${search}`);
        }
        return;
      }
      
      // Remove the base if it's already in the path
      const cleanPath = path.startsWith(base) ? path.substring(base.length) : path;
      
      // Create the new URL with hash-based routing
      let route = cleanPath;
      if (route.startsWith('/')) {
        route = route.substring(1);
      }
      
      // Redirect to the SPA with hash-based routing
      const newUrl = `${base}/index.html#/${route}${search}${hash}`;
      window.location.replace(newUrl);
    })();
  </script>
</head>
<body>
  <p>Redirecting to the application...</p>
  <p>If you are not redirected automatically, <a id="redirectLink" href="/joo-store">click here</a>.</p>
  <script>
    // Fallback in case the redirect doesn't work
    const base = '/joo-store';
    document.getElementById('redirectLink').href = `${base}${window.location.pathname}${window.location.search}${window.location.hash}`;
  </script>
</body>
</html>
