<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting...</title>
  <script>
    (function() {
      const base = '/joo-store';
      const path = window.location.pathname;
      const search = window.location.search || '';
      const hash = window.location.hash || '';

      // If we're already at index.html, let the SPA handle the hash
      if (path.endsWith('index.html')) {
        return;
      }

      // Handle direct cart access
      if (path.endsWith('/cart') || path.endsWith('/cart/')) {
        window.location.replace(`${base}/index.html#/cart${search}`);
        return;
      }

      // For any other path that's not the root
      if (path !== '/' && !path.endsWith('/')) {
        const cleanPath = path.startsWith(base) 
          ? path.substring(base.length) 
          : path;
        
        // Remove leading/trailing slashes
        const route = cleanPath.replace(/^\/+|\/+$/g, '');
        
        if (route) {
          window.location.replace(`${base}/index.html#/${route}${search}${hash}`);
          return;
        }
      }

      // Default redirect to home
      window.location.replace(`${base}/index.html${search}${hash}`);
    })();
  </script>
</head>
<body>
  <p>Redirecting to the application...</p>
  <p>If you are not redirected automatically, <a id="redirectLink" href="/joo-store">click here</a>.</p>
  <script>
    // Fallback in case the redirect doesn't work
    const base = '/joo-store';
    document.getElementById('redirectLink').href = `${base}${window.location.pathname}${window.location.search}${window.location.hash}`;
  </script>
</body>
</html>
